{"version":3,"sources":["js/content.js","js/list.js","js/createForm.js","js/index.js"],"names":["Content","contentEl","item","content","title","getFormatedDate","id","innerHTML","Date","toLocaleString","List","listEl","list","document","querySelector","init","render","forEach","index","liEl","getListItem","append","createElement","classList","setAttribute","addEventListener","onListItemClick","length","add","items","Array","from","querySelectorAll","elem","remove","CreateForm","createButton","createForm","modal","close","listContainer","toggleModal","event","onSubmit","toggle","preventDefault","formData","getFormData","isFormValid","fetch","method","headers","body","JSON","stringify","then","response","json","data","catch","error","console","reset","currentDate","FormData","getTime","name","value","trim","alert"],"mappings":"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","file":"js.00a46daa.js","sourceRoot":"..\\client","sourcesContent":["export class Content {\n  constructor(contentEl) {\n    this.contentEl = contentEl;\n  }\n\n  render(item) {\n    const content = `\n        <div class=\"main-section__content-container\">\n            <h2 class=\"main-section__content-title\">${item.title}</h2>\n            <time class=\"main-section__content-time\">${this.getFormatedDate(+item.id)}</time>\n            <p class=\"main-section__content-description\">${item.content}</p>\n        </div>\n    `;\n    this.contentEl.innerHTML = content;\n  }\n\n  // Форматируем id (из new Date) к виду \"10.01.2021, 23:25:27\"\n  getFormatedDate(id) {\n    return new Date(id).toLocaleString();\n  }\n}\n","import { Content } from \"./content\";\n\nexport class List {\n  constructor(listEl, list) {\n    this.list = list;\n    this.listEl = listEl;\n    this.contentEl = document.querySelector(\"#content\");\n    this.content = new Content(this.contentEl); // создаем эземпляр класса Content (content.js)\n    this.init();\n  }\n\n  init() {\n    // запускаем метод render\n    this.render();\n  }\n\n  render() {\n    this.listEl.innerHTML = \"\";\n\n    // проходимся по list (data.json) и вставляем значения title и id в создаваемые li\n    this.list.forEach((item, index) => {\n      const liEl = this.getListItem(item, index);\n      this.listEl.append(liEl); // используем append для добавления элемента созданного динамически\n    });\n  }\n\n  // Форматируем id (из new Date) к виду \"10.01.2021, 23:25:27\"\n  getFormatedDate(id) {\n    return new Date(id).toLocaleString();\n  }\n\n  getListItem(item, index) {\n    const liEl = document.createElement(\"li\");\n\n    liEl.classList = \"main-section__item\";\n    liEl.setAttribute(\"data-id\", item.id);\n    liEl.innerHTML = `\n      ${item.title}\n      <time class=\"main-section__time\">${this.getFormatedDate(+item.id)}</time>\n    `;\n\n    // по клику вызаваем метод render(item) - отрисовывается content соответствующий li\n    liEl.addEventListener(\"click\", () => {\n      this.onListItemClick(liEl, item);\n    });\n\n    if (index === 0 && this.list.length > 0) {\n      liEl.classList.add(\"main-section__item--active\");\n      this.content.render(item);\n    }\n\n    return liEl;\n  }\n\n  onListItemClick(liEl, item) {\n    // записываем в массив все li (до этого был псевдомассив - html колекция)\n    const items = Array.from(document.querySelectorAll(\".main-section__item\"));\n\n    // удаляем класс active\n    items.forEach((elem) => {\n      elem.classList.remove(\"main-section__item--active\");\n    });\n\n    // добавляем класс active\n    liEl.classList.add(\"main-section__item--active\");\n    this.content.render(item);\n  }\n}\n","import { List } from \"./list\";\n\nexport class CreateForm {\n  constructor() {\n    this.createButton = document.querySelector(\"#create\");\n    this.createForm = document.querySelector(\"#form\");\n    this.modal = document.querySelector(\"#modal\");\n    this.close = document.querySelector(\"#close\");\n    this.listContainer = document.querySelector(\"#list\");\n\n    this.init();\n  }\n\n  init() {\n    this.createButton.addEventListener(\"click\", () => {\n      this.toggleModal();\n    });\n\n    this.close.addEventListener(\"click\", () => {\n      this.toggleModal();\n    });\n\n    this.createForm.addEventListener(\"submit\", (event) => {\n      this.onSubmit(event);\n    });\n  }\n\n  toggleModal() {\n    this.modal.classList.toggle(\"modal--active\");\n  }\n\n  onSubmit(event) {\n    event.preventDefault();\n\n    const formData = this.getFormData();\n\n    if (this.isFormValid(formData)) {\n      fetch(\"/api/data\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json;charset=utf-8\" },\n        body: JSON.stringify(formData),\n      })\n        .then((response) => response.json())\n        .then((data) => new List(this.listContainer, data.list))\n        .catch((error) => console.error(error));\n\n      this.createForm.reset();\n      this.toggleModal();\n    }\n  }\n\n  // Получаем объект полей формы\n  getFormData() {\n    const data = {};\n    const currentDate = new Date();\n    const formData = new FormData(this.createForm);\n\n    formData.append(\"id\", currentDate.getTime());\n\n    for (const [name, value] of formData) {\n      data[name] = value;\n    }\n\n    return data;\n  }\n\n  isFormValid({ content, title }) {\n    if (content.trim().length > 1 && title.trim().length > 1) {\n      return true;\n    }\n    alert(\n      \"Текст должен быть не короче 2 символов и не длиннее 80 для заголовка и 200 для описания\"\n    );\n    return false;\n  }\n}\n","import { List } from \"./list\";\nimport { CreateForm } from \"./createForm\";\n\nconst createForm = new CreateForm();\n\nconst listEl = document.querySelector(\"#list\");\n\nfetch(\"/api/data\", { method: \"GET\" })\n  .then((response) => response.json())\n  .then((data) => new List(listEl, data.list))\n  .catch((error) => console.error(error));\n"]}